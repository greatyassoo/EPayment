<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="492px" preserveAspectRatio="none" style="width:735px;height:492px;background:#FFFFFF;" version="1.1" viewBox="0 0 735 492" width="735px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="406" x="45.5" y="221.0156"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="406" x="45.5" y="283.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="82.6094" y2="410.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="114.5" x2="114.5" y1="82.6094" y2="410.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="395.5" x2="395.5" y1="82.6094" y2="410.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="610.5" x2="610.5" y1="82.6094" y2="410.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="705.5" x2="705.5" y1="82.6094" y2="410.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="5" y="79.5332">user</text><ellipse cx="22" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22,21.5 L22,48.5 M9,29.5 L35,29.5 M22,48.5 L9,63.5 M22,48.5 L35,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="5" y="423.6582">user</text><ellipse cx="22" cy="435.2344" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22,443.2344 L22,470.2344 M9,451.2344 L35,451.2344 M22,470.2344 L9,485.2344 M22,470.2344 L35,485.2344 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="55.5" y="79.5332">external_interface</text><path d="M94.5,37 L94.5,61 M94.5,49 L111.5,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="123.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="55.5" y="423.6582">external_interface</text><path d="M94.5,430.7344 L94.5,454.7344 M94.5,442.7344 L111.5,442.7344 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="123.5" cy="442.7344" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="350.5" y="79.5332">EPaymentAPI</text><ellipse cx="396" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="392,37,398,32,396,37,398,42,392,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="350.5" y="423.6582">EPaymentAPI</text><ellipse cx="396" cy="442.7344" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="392,430.7344,398,425.7344,396,430.7344,398,435.7344,392,430.7344" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="554.5" y="79.5332">AccountsFetcher</text><path d="M593,29 C593,19 611,19 611,19 C611,19 629,19 629,29 L629,55 C629,65 611,65 611,65 C611,65 593,65 593,55 L593,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M593,29 C593,39 611,39 611,39 C611,39 629,39 629,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="554.5" y="423.6582">AccountsFetcher</text><path d="M593,436.7344 C593,426.7344 611,426.7344 611,426.7344 C611,426.7344 629,426.7344 629,436.7344 L629,462.7344 C629,472.7344 611,472.7344 611,472.7344 C611,472.7344 593,472.7344 593,462.7344 L593,436.7344 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M593,436.7344 C593,446.7344 611,446.7344 611,446.7344 C611,446.7344 629,446.7344 629,436.7344 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="677.5" y="79.5332">Account</text><ellipse cx="706" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="694" x2="718" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="677.5" y="423.6582">Account</text><ellipse cx="706" cy="442.7344" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="694" x2="718" y1="456.7344" y2="456.7344"/><polygon fill="#181818" points="103,110.9609,113,114.9609,103,118.9609,107,114.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22" x2="109" y1="114.9609" y2="114.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="29" y="110.1045">addRefund()</text><polygon fill="#181818" points="384,141.3125,394,145.3125,384,149.3125,388,145.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="115" x2="390" y1="145.3125" y2="145.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="122" y="140.4561">{POST} addRefundRequest(body)</text><polygon fill="#181818" points="599,171.6641,609,175.6641,599,179.6641,603,175.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="396" x2="605" y1="175.6641" y2="175.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="403" y="170.8076">getAccount(userEmail,password)</text><polygon fill="#181818" points="407,202.0156,397,206.0156,407,210.0156,403,206.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="401" x2="610" y1="206.0156" y2="206.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="413" y="201.1592">returns account</text><path d="M45.5,221.0156 L106.5,221.0156 L106.5,229.3672 L96.5,239.3672 L45.5,239.3672 L45.5,221.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="406" x="45.5" y="221.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="60.5" y="235.5107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="230" x="121.5" y="234.4346">[if transaction already in refund requests]</text><polygon fill="#181818" points="126,257.7188,116,261.7188,126,265.7188,122,261.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="395" y1="261.7188" y2="261.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="132" y="256.8623">Transaction already added to refund request.</text><path d="M45.5,283.7188 L106.5,283.7188 L106.5,292.0703 L96.5,302.0703 L45.5,302.0703 L45.5,283.7188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="406" x="45.5" y="283.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="60.5" y="298.2139">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="161" x="121.5" y="297.1377">[if transaction type is top_up]</text><polygon fill="#181818" points="126,320.4219,116,324.4219,126,328.4219,122,324.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="395" y1="324.4219" y2="324.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="132" y="319.5654">You cannot refund a top up transaction</text><polygon fill="#181818" points="694,357.7734,704,361.7734,694,365.7734,698,361.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="396" x2="700" y1="361.7734" y2="361.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="403" y="356.917">addRefundReques(transactionID)</text><polygon fill="#181818" points="126,388.125,116,392.125,126,396.125,122,392.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="395" y1="392.125" y2="392.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="132" y="387.2686">returns true</text><!--MD5=[0de73812b0a8a5a47064963026c0c852]
@startuml makeRefundRequest

actor user
boundary external_interface as external_interface
control EPaymentAPI as EPaymentAPI
database AccountsFetcher as AccountsFetcher
entity Account as Account


user->external_interface:addRefund()
external_interface->EPaymentAPI:{POST} addRefundRequest(body)
EPaymentAPI->AccountsFetcher:getAccount(userEmail,password)
AccountsFetcher- ->EPaymentAPI:returns account
alt if transaction already in refund requests
    EPaymentAPI- ->external_interface:Transaction already added to refund request.
end
alt if transaction type is top_up
    EPaymentAPI- ->external_interface:You cannot refund a top up transaction
end
EPaymentAPI->Account:addRefundReques(transactionID)
EPaymentAPI- ->external_interface:returns true
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 EET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>